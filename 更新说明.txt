
V1.0.0rc0 v20220511

主要

- 新增: .set dnd/coc 一键切换coc/dnd模式
- 新增: 后台加入群组管理
- 新增: 后台加入黑名单功能，指令.ban/black
- 新增: .log stat 跑团检定统计
- 新增: 指令 .who .userid .modu .ob .sn

- 优化: 大幅改进指令自定义文案界面的易用性
- 优化: 特别优化了开启多个海豹的流程，托盘悬停可区分

升级建议: 重置“核心:角色管理_储存成功”的文本，增加了机制解说


其他

- 新增: 骰主现在可以自定义入群时开启的模块，以及关闭部分指令。
- 新增: 自定义文案现在会标出对应的指令
- 新增: 扩展批量开关，例如 .ext deck fun dnd5e off
- 新增: 骰主可以通过群号取出log了
- 新增: 骰主在后台进行设置 .help 骰主 / .help 协议 两项文本
- 新增: .text 指令移入fun模块
- 新增: 提供coc7模块st指令别名cst，与dnd的dst相对应
- 新增: 如果端口被占用，自动进行切换
- 新增: .send 现在可以发送回复
- 新增: 加入新的COC文档魔法大典
- 新增: 变量 $tDay(日期，int，20220510)、$t玩家_RAW(不带<>的PC名字，建议谨慎使用)

- 优化: .dst[dnd5e]现在支持使用等号赋值
- 优化: .dst[dnd5e]现在支持一半熟练(诗人-万事通)，用法 .dst 运动*0.5=0，即之前的星号后面写0.5
- 优化: .welcome现在会正确记录多行文本，并在welcome show时提供预览
- 优化: .setcoc系列规则文本从自定义中移除
- 优化: 当默认端口不是3211时，自动打开的UI地址也跟着变化
- 优化: Windows上，当端口被占用弹窗提示
- 优化: 文档支持引用写法(重定向)
- 优化: 频道中将链接替换，以免发不出
- 优化: 在写自定义回复时，如果属性以_开头那么跳过_。如{_力量}等价{力量}，{_d20}指向属性"d20"
- 优化: 海豹托盘标出端口号以作区分
- 优化: .nn指令重做

- 修复: .set非20面或100面骰时，文案错误
- 修复: log list 会错误显示-delMark记录
- 修复: 短时间2连重新登录可能会导致骰子不正常
- 修复: log list 会显示撤回记录
- 修复: 群组数量统计不准确
- 修复: botlist add 能添加自己
- 修复: botlist add 在不被@时静默
- 修复: 系统托盘失去响应
- 修复: 自定义文本首行回车会引起启动失败
- 修复: 32位windows系统自动升级问题


自定义变更:

变更的默认文本:
- DND:先攻_设置_前缀
- COC:属性设置
- COC:技能成长
- 核心:角色管理_储存成功
- 核心:核心:昵称_改名


移除的自定义文本:
- COC:设置房规 系列 // 规则文本没有自定义的必要
- COC:通用_D100判定_带过程 // 实际已经不被使用，早期版本(0.99.10之前用于ra/rc)
- COC:通用_D100判定 // 早期版本(0.99.10之前用于ra/rc)，上版本用于.en，建议重新调整COC:技能成长后删除


新增自定义文本:
- 无


升级指南:

自动方式:
- .master checkupdate

手动方式:
- 解压覆盖
- 对于变更的默认文本，可以在UI界面，复制备份旧的之后点小刷子重置，然后修改文案


额外提醒:

- 这两天gocqhttp似乎不太稳定（小心校园网和腾讯云），如果日志中看到没有明确理由的gocqhttp退出，多试几次
- 文本的自定义支持，一般会在某指令做好的第二个版本推出。若是草案指令则可能更久一点
- 如果页面忽然404刷不出来，那是进程崩掉了，一般重开就能解决。此时的程序log会对确保海豹后续版本的稳定性很有帮助，如果可以的话请发给我看看。

